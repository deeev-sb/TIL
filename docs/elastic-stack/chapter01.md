# 01. 엘라스틱 스택이란

## 1.1. 엘라스틱서치의 탄생
엘라스틱서치(Elasticsearch)는 **전문 검색 기능을 제공하는 강력한 소프트웨어의 필요성**에 의해 등장하게 되었습니다.

엘라스틱서치가 탄생하게 된 과정은 다음과 같습니다.
1. 1999년 더그 커팅(Doug Cutting)에 의해 루씬(Lucene) 탄생
2. 2001년 아파치 자카르타(Jakarta)에 루씬 합류
3. 2005년 2월 루씬은 독자적인 아파치 프로젝트로 분리됨
4. 2004년 CNET 네트워크에서 웹사이트 검색을 위한 검색 엔진 개발
5. 2006년 CNET 네트워크에서 검색 엔진 소스 코드를 아파치 재단에 기부하여 솔라(Solr) 탄생
6. 2010년 샤이 배넌(Shy Banon)에 의해 루씬 기반의 엘라스틱서치 탄생
   - 처음부터 분산 환경을 위한 솔루션, HTTP상에서 JSON으로 인터페이스를 지원하는 솔루션, 자바 이외에도 다양한 프로그래밍 언어를 지원하는 솔루션 표방
7. 2010년 3월 루씬과 솔라 통합
   - 2021년 2월 솔라는 루씬에서 분리되어 완전히 독립된 아파치 최상위 프로젝트로 자리 잡음

## 1.2. 엘라스틱 스택으로 발전

전문 검색은 대량의 데이터를 저장해서 처리하는 한 가지 방법에 불과하며, 다양한 사용 사례를 유연하게 지원하지 못합니다. 유연성을 확보하려면 **데이터를 수집, 가공, 저장, 분석, 시각화하는 일련의 파이프라인** 구성이 필요했고, 이를 위해 다양한 오픈소스 소프트웨어를 조합해야하는 불편함이 발생했습니다. 이러한 불편함을 개선하기 위해 샤이 배넌은 2012년 로그스태시(Logstash)를 개발하고 있던 요르단 시셀(Jordan Sissel)과 키바나(Kibana)를 개발하고 있던 라시드 칸(Rashid Khan)과 팀을 결성하여 **ELK 스택(Stack)** 을 개발했습니다. 2015년 패킷비트(Packetbeat)라는 회사와 연합하여 경량 데이터 수집기인 비츠(Beat)가 탄생하게 되고, 여러 오픈소스 소프트웨어 가 합쳐진 결과 다음과 같은 **엘라스틱 스택(Elastic Stack)** 이 완성되었습니다.

![image](https://user-images.githubusercontent.com/46712693/232727817-d7439b26-2efc-49e6-9b9b-8686f6ef0fc3.png)

초창기에는 느슨한 형태로 개발되어 버전 번호가 제각각 붙어 호환성을 유지하기가 어려웠으나, 2015년 10월 **버전을 동일하게 맞춘 제품을 동시에 출시해서 안정적인 기반을 확보**하게 되었습니다.

## 1.3. 엘라스틱 스택의 구성요소

엘라스틱 스택의 구성 요소에 대해 간략하게 설명하면 다음과 같습니다.

- 비츠, 로그스태시 : 데이터를 수집하고 가공하는 역할
- 엘라스틱서치 : 데이터를 저장하고 분석하는 역할
- 키바나 : 엘라스틱서치에 저장된 데이터를 시각화하고 모니터링하는 역할

### 1.3.1. 엘라스틱서치 : 분산 검색 엔진
검색 엔진이란 내부적으로 각 도큐먼트를 인덱싱하고 빠르게 검색하는 데 사용하는 기술을 의미하며, 이러한 검색 엔진을 활용해 검색 시스템을 구축할 수 있습니다. 엘라스틱서치는 **검색 엔진**이자 **일종의 NoSQL**로 보며, 다음과 같은 특징을 가집니다. 어떠한 점에서 NoSQL인지 궁금하다면 [공식 블로그](https://www.elastic.co/kr/blog/found-elasticsearch-as-nosql) 내용을 참고해주시길 바랍니다.

- 모든 레코드를 **JSON 도큐먼트 형태**로 입력 및 관리
- **쿼리**한 결과에 대해 일치하는 원본 도큐먼트 반환
- 텍스트, 숫자, 날짜, IP 주소, 지리 정보 등 **다양한 데이터 타입** 지원
- 최적화된 자료구조를 바탕으로 병렬 처리 및 분산 처리 가능
  - 텍스트나 도큐먼트 : 인덱싱 시점 분석 → 용어 단위로 분해 → 역인덱스 사전 구축
  - 숫자나 키워드 : 집계에 최적화된 컬럼 기반 자료구조를 저장
- **스코어링(scoring, 연관도)** 에 따른 정렬
  - 검색어에 대한 유사도 스코어를 기반으로 한 정렬
  - 다양한 스코어링 방법을 포함해 사용자가 정렬 방식을 다양하게 정의 가능
- **노드 간 복제 기능**으로 인해 일부 노드가 다운되더라도 정상적으로 서비스 지속 가능
- 모든 통신을 **REST API** 이용
  - 프로그래밍 언어와 무관하게 사용자가 쉽게 접근 가능 ⇒ 활용도↑
- 저장 공간이 크게 압축되지 않고 **시스템 리소스를 많이 사용**함
- **반정규화**를 기본으로 모델링해야 함
  - DSL(Domain Specific Language) 쿼리를 채용하여 JOIN 쿼리 사용이 사실상 어려움
- 인덱스가 **불변의 자료구조**이기 때문에 도큐먼트 수정/삭제 비용이 저렴하지 않음

엘라스틱서치 클러스터를 아래 그림과 유사하게 분산 시스템으로 구성합니다. 복수의 루씬 인스턴스를 병렬로 배치하고 분산 처리하기 때문에 검색 속도를 무한히 확장할 수 있습니다. 이론적으로는 충분한 크기의 엘라스틱서치 클러스터가 구성되어 있다면, 데이터 양에 무관하게 1초 이내의 응답 속도를 기대할 수 있습니다.

![image](https://user-images.githubusercontent.com/46712693/232731814-6a927f20-a76f-470c-b917-6d2a2754ec6d.png)

### 1.3.2. 키바나 : 시각화와 엘라스틱서치 관리 도구

키바나는 **엘라스틱 스택의 UI**를 담당하며, 아래 기능을 포함한 여러 기능을 제공합니다.

- 엘라스틱서치에 대한 대부분의 관리 기능, API를 실행할 수 있는 콘솔, 솔루션 페이지들
- 스택의 각 구성요소들을 위한 모니터링 페이지

키바나는 엘라스틱서치 기반의 시각화 도구로서, 가장 중요한 기능은 **시각화**와 **대시보드** 입니다. 라인 차트, 파이 차트 등 여러 차트와 테이블, 지도 등 **다양한 시각화 요소**들을 제공하며, 이러한 **시각화 요소들을 한 화면에 마음대로 배치하고 실시간으로 업데이트**할 수 있는 기능이 대시보드입니다. 대시보드에서는 실시간 모니터링이나 데이터 분석도 가능합니다.

![](https://static-www.elastic.co/v3/assets/bltefdd0b53724fa2ce/blta64f0cb4ab8c7c1c/5fa31cc94a4abb73ff79b0d5/illustrated-screenshot-hero-kibana.png)
<br/>출처 : <https://www.elastic.co/kr/kibana/>



> 본 게시글은 [엘라스틱 스택 개발부터 운영까지](https://product.kyobobook.co.kr/detail/S000001932755) 도서를 참고하여 작성되었습니다.
>
> 상세한 내용이 궁금하시다면 책을 읽어보실 것을 추천해 드립니다.
>