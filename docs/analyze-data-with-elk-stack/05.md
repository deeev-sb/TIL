# 05. Logstash

### ì‹¤ìŠµí™˜ê²½
- Windows 10
- Elasticsearch 7.10.2
- Logstash 7.10.2
- Git Bash

## 01. Logstash ì„¤ì¹˜í•˜ê¸°

Logstashë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ Javaê°€ ì„¤ì¹˜ë˜ì–´ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” Java ì„¤ì¹˜ì— ëŒ€í•œ ë‚´ìš©ì€ ìƒëžµí•©ë‹ˆë‹¤.

LogstashëŠ” ì•„ëž˜ ë§í¬ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì•„ ì„¤ì¹˜í•˜ë©´ ë©ë‹ˆë‹¤.

ðŸ‘‰ [Logstash ì„¤ì¹˜ ë§í¬](https://www.elastic.co/kr/downloads/logstash)

ì‹¤ìŠµì€ [Logstash Reference](https://www.elastic.co/guide/en/logstash/7.10/first-event.html) Getting Started with Logstashì— ìžˆëŠ” ì‹¤ìŠµ ì˜ˆì œë¥¼ í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## 02. Logstash ì‹¤í–‰í•˜ê¸°

ë‹¤ìš´ë¡œë“œ ë°›ì€ ê²½ë¡œì—ì„œ ì•„ëž˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. (/d/logstash-7.10.2)

```bash
bin/logstash -e 'input { stdin { } } output { stdout {} }'
```

ê·¸ ë‹¤ìŒ `Hello World`ë¥¼ ìž…ë ¥í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ê·¸ ì•„ëž˜ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸êµ¬ê°€ í‘œì¶œë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```bash
{
       "message" => "Hello World",
    "@timestamp" => 2023-04-14T07:17:20.332Z,
          "host" => "host name",
      "@version" => "1"
}
```

`ctrl + c`ë¥¼ ìž…ë ¥í•˜ë©´ Logstashë¥¼ ì¢…ë£Œì‹œí‚¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì´ë²ˆì—ëŠ” ìœ„ì™€ ë˜‘ê°™ì€ logstash í˜•ì‹ì„ conf íŒŒì¼ì„ ë¶ˆëŸ¬ì™€ì„œ ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì €, `config` íŒŒì¼ ë‚´ì— `logstash.conf` íŒŒì¼ì„ ì•„ëž˜ ë‚´ìš©ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

```shell
input {
    stdin { }
}
output {
    stdout { }
}
```

ê·¸ ë‹¤ìŒ, ë‹¤ìš´ë¡œë“œ ë°›ì€ ê²½ë¡œì—ì„œ ì•„ëž˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```bash
bin/logstash -f config/logstash.conf
```

ê·¸ë¦¬ê³  ìœ„ì—ì„œ ì‹¤í–‰í–ˆë˜ ì˜ˆì œì™€ ë™ì¼í•˜ê²Œ `Hello World`ë¥¼ ìž…ë ¥í•˜ë©´, ì¶œë ¥ ê°’ì„ í†µí•´ ìœ„ ì˜ˆì œì™€ ë™ì¼í•˜ê²Œ ë™ìž‘í•˜ê³  ìžˆìŒì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```bash
{
       "message" => "Hello World",
          "host" => "host name",
    "@timestamp" => 2023-04-14T07:24:55.347Z,
      "@version" => "1"
}
```

> ë³¸ ê²Œì‹œê¸€ì€ [ELK ìŠ¤íƒ (ElasticSearch, Logstash, Logstash) ìœ¼ë¡œ ë°ì´í„° ë¶„ì„](https://www.inflearn.com/course/elk-%EC%8A%A4%ED%83%9D-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%EC%84%9D/dashboard) ê°•ì˜ë¥¼ ì°¸ê³ í•˜ì—¬ ìž‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
>
>
> ìƒì„¸í•œ ë‚´ìš©ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ ê°•ì˜ ìˆ˜ê°•ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.
>

- ì¶”ê°€ë¡œ ì°¸ê³ í•œ ë‚´ìš©
  - <https://jun108059.github.io/til/ElasticSearch/14.Logstash.html#_1-logstash%E1%84%85%E1%85%A1%E1%86%AB>